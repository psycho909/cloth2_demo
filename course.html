<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!-- keywords -->
	<meta name="keywords" content="布平方手作教室,布平方手做教室,手作,手做,手作教室,手做教室,親手製作自己喜歡的衣服與包包">
	<!-- link -->
	<meta property="og:url" content="" />
	<!-- keywords -->
	<meta property="og:title" content="布平方手作教室">
	<!-- keywords -->
	<meta property="og:description" content="布平方手作教室,親手製作自己喜歡的衣服與包包"/>
	<!-- keywords -->
    <meta name="description" content="布平方手作教室,親手製作自己喜歡的衣服與包包" />

	<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<title>布平方手作教室</title>
	<link rel="stylesheet" href="./css/swiper-4.2.2.min.css">
	<link rel="stylesheet" href="./css/index.css">
	<script src="./js/lib/jquery-3.1.1.min.js"></script>
	<script src="./js/swiper-4.2.2.min.js"></script>
</head>
<body>
	<div class="wrapper">
		<header id="header">
			<div class="header-wrppper">
				<h1 class="logo">布平方手作教室</h1>
				<div class="nav-toggle"></div>
				<ul class="navbar">
					<li><a href="./index.html">首頁</a></li>
					<li><a href="./course.html" class="active">課程介紹</a></li>
					<li><a href="javascript:;">工作室介紹</a></li>
					<li><a href="javascript:;">報名須知</a></li>
					<li><a href="javascript:;">聯絡我們</a></li>
				</ul>
			</div>
		</header>
		<section id="swiper">
			<div id="swiper-bigAd" class="swiper-container">
				<div class="swiper-wrapper">
					<div class="swiper-slide">
						<img src="./images/swiper/home_1.jpg" alt="">
					</div>
					<div class="swiper-slide">
						<img src="./images/swiper/home_2.jpg" alt="">
					</div>
					<div class="swiper-slide">
						<img src="./images/swiper/home_3.jpg" alt="">
					</div>
				</div>
				<!-- 如果需要分页器 -->
				<div class="swiper-pagination"></div>
				
				<!-- 如果需要导航按钮 -->
				<!-- <div class="swiper-button-prev"></div>
				<div class="swiper-button-next"></div> -->
			</div>
		</section>

		<articel id="course-list-container"></articel>

		<section id="content">
			<section class="content-wrapper">
				<div class="content-item content-list">
					<div class="title">Content</div>
					<ul>
						<li>布平方手作教室</li>
						<li>台北市士林區延平北路五段285巷65號</li>
						<li>cloth2@gmail.com</li>
					</ul>
				</div>
				<div class="content-item social-list">
					<div class="title">Social</div>
					<a class="social-icon fb-icon" href="https://www.facebook.com/cloth2.tw/" target="_blank"></a>
					<a class="social-icon ig-icon" href="#" target="_blank"></a>
				</div>
				<div class="content-item support-list">
					<div class="title">Support</div>
					<ul>
						<li><a href="#">關於布平方</a></li>
						<li><a href="#">訂做</a></li>
						<li><a href="#">工作室介紹</a></li>
						<li><a href="#">報名須知</a></li>
						<li><a href="./course.html">課程介紹</a></li>
					</ul>
				</div>
				<div class="content-item logo">
					<a href="./index.html"></a>
				</div>
			</section>
		</section>
		<footer id="copyright">
			<div class="copyright">版權所有 © Copyright  2018 布平方手作教室</section>
		</footer>
    </div>
    
	<script src="js/app.js"></script>
	<script>

		let url="https://www.easy-mock.com/mock/5ae3d256a223347f360565ac/course_demo/index";
		$.ajax({
			url:url,
			method:'get',
			dataType:'json',
			success:function(data){
				var _data=data.data;
				let CourseArr=[];
				let CourseTitle=_data.courseTitle;
				let CourseList=_data.courseList;

				let CourseHTML='';
				let CourseWrapper=`<div class="course-list-wrapper">{course_content}</div>`;
				let CourseTitleStr=`<h4 class="course-list-title"><span>{typetitle}</span></h4>`;
				let CourseStr=`
					<div id="course-list_{id}" class="course-list-box {level}">
						<div class="course-list">
							<div class="course-list-img flex-20" data-src="{image}"></div>
							<div class="course-list-content">
								<div class="title-box">
									<h4>{title}</h4>
									<h5>{subtitle}</h5>
								</div>
								<div class="content-box">
									<div class="teachs teach-focus">
										<div class="title">教學重點</div>
										<ul>
											{teachfocus}
										</ul>
									</div>
									<div class="teachs teach-notice">
										<div class="title">注意事項</div>
										<ul>
											{notice}
										</ul>
									</div>
									<div class="teachs teach-item">
										<div class="title">作品尺寸：(單位公分)</div>
										{iteminfo}
									</div>
								</div>
							</div>
							<div class="course-list-join">
								<div class="course-list-diff">
									<span class="title">難度</span>
									<div class="stars">
										{star}
									</div>
								</div>
								<div class="course-list-price">
									<span class="price">{price}</span>
									<span class="notice">(含學費、場地費、材料費)</span>
								</div>
								<a href="{href}" class="btn btn-signup" target="_blank">我要報名</a>
								<a class="courseList-join-rules text-right" href="javascript:;" target="_blank">(報名須知)</a>
							</div>
						</div>
					</div>
				`;
				let CourseAll='';
				let teachfocusHTML='';
				let noticeHTML='';
				let iteminfoHTML='';
				let starHTML='';
				CourseTitle.forEach((item)=>{
					CourseArr[item]=[];
				})
				for(var i=0;i<CourseList.length;i++){
					CourseArr[CourseList[i].type].push(CourseList[i])	
				}

				for(var key in CourseArr){
					CourseHTML='';
					CourseAll='';
					CourseHTML+=CourseTitleStr.replace('{typetitle}',key);
					for(var i=0;i<CourseArr[key].length;i++){
						teachfocusHTML='';
						noticeHTML='';
						iteminfoHTML='';
						starHTML='';
						CourseArr[key][i].notice.forEach((item)=>{
							noticeHTML+=`<li>${item}</li>`;
						})
						CourseArr[key][i].teachfocus.forEach((item)=>{
							teachfocusHTML+=`<li>${item}</li>`;
						})
						CourseArr[key][i].iteminfo.forEach((item)=>{
							iteminfoHTML+=`<div class="item-info">${item}</div>`;
						})
						for(var l=0;l<CourseArr[key][i].star;l++){
							starHTML+=`<span class="star star-fill"></span>`;
						}
						for(var k=0;k<(5-CourseArr[key][i].star);k++){
							starHTML+=`<span class="star star-unfill"></span>`
						}
						CourseHTML+=CourseStr.replace('{href}',CourseArr[key][i].href)
												.replace('{image}',CourseArr[key][i].image)
												.replace('{title}',CourseArr[key][i].title)
												.replace('{typetitle}',CourseArr[key][i].type)
												.replace('{type}',CourseArr[key][i].type)
												.replace('{level}',CourseArr[key][i].level)
												.replace('{price}',CourseArr[key][i].price)
												.replace('{id}',i)

												.replace('{subtitle}',CourseArr[key][i].subtitle)
												.replace('{teachfocus}',teachfocusHTML)
												.replace('{notice}',noticeHTML)
												.replace('{iteminfo}',iteminfoHTML)
												.replace('{star}',starHTML)
					}
					CourseAll=CourseWrapper.replace('{course_content}',CourseHTML);
					$('#course-list-container').append(CourseAll)
				}
			},
			error:function(error){
				console.log(error)
			}
		})




		$('.nav-toggle').on('click',function(){
			$('.navbar').toggleClass('toggle');
		})
		var bigAd = new Swiper ('#swiper-bigAd', {
			direction: 'horizontal',
			loop: true,
			// autoplay: {
			// 	delay: 2000,
			// 	disableOnInteraction: false,
			// },
			// 如果需要分页器
			pagination: {
				el: '.swiper-pagination',
				clickable: true,
			},
			
			// 如果需要前进后退按钮
			// navigation: {
			// 	nextEl: '.swiper-button-next',
			// 	prevEl: '.swiper-button-prev',
			// },
		})
		var moreAd = new Swiper('#swiper-moreAd', {
			slidesPerView: 5,
			spaceBetween: 0,
			breakpoints: {
				1024: {
					slidesPerView: 4,
					spaceBetween: 0,
				},
				768: {
					slidesPerView: 3,
					spaceBetween: 0,
				},
				640: {
					slidesPerView: 2,
					spaceBetween: 0,
				},
				414: {
					slidesPerView: 1,
					spaceBetween: 0,
				}
			}
		});     

		var clientHeight=document.documentElement.clientHeight;
		var scrollHeight=document.documentElement.scrollTop + clientHeight;

		function getTop(el,initVal){
			var top=el.offsetTop+initVal;
			if(el.offsetParent !== null){
				top += el.offsetParent.clientTop;
				return getTop(el.offsetParent,top);
			}else{
				return top;
			}
		}
		function inSight(el){
			var clientHeight=document.documentElement.clientHeight;
			var scrollHeight=document.documentElement.scrollTop + clientHeight;

			return getTop(el,0) < scrollHeight;
		}

		function loadImg(el){
			if(!el.style.backgroundImage){
				el.style.backgroundImage=`url('${el.dataset.src}')`;
			}
		}
		function checkImgs(){
			var count=0;
			var imgs=document.querySelectorAll('.course-list-img');
			Array.from(imgs).forEach(el=>{
				if (inSight(el)){
					loadImg(el)
				}
			})
			// console.log(count++)
		}
		function throttle(fun,delay,time){
			var timeout;
			var previous= +new Date();
			return function(){
				var now= +new Date();
				var context=this;
				var args=arguments;
				clearTimeout(timeout);
				if(now - previous >= time ){
					fun.apply(context,args);
					previous=now;
				}else{
					timeout=setTimeout(function(){
						fun.apply(context,args);
					},delay)
				}
			}
		}

		window.addEventListener('scroll', throttle(checkImgs,200,1000),false);
		window.onload = checkImgs;
	</script>
</body>
</html>